# Licensed Materials - Property of IBM
#
# @ Copyright IBM Corporation 2016, 2018. All Rights Reserved.
# US Government Users Restricted Rights - Use, duplication or disclosure restricted by GSA ADP Schedule Contract with IBM Corp.

overrides:
- reason: "The webhook and its subcharts are deployed into the cert-manager namespace and use the default service account in that namespace. It doesn't need to create its own service account."
  rule: "ServiceAccountHasSANamespacePullSecret"
  severity: "ERROR"
- reason: "The webhook and its subcharts are deployed into the cert-manager namespace and use the default service account in that namespace. It doesn't need to create its own service account."
  rule: "ServiceAccountHasPullSecret"
  severity: "WARNING"
- reason: "The webhook and its subcharts should only run on master nodes."
  rule: "PodHasArchBasedNodeAffinity"
  severity: "ERROR"
- reason: "If it were enabled, the rolebinding must be run on the kube-system namespace in order to read the specific configmap that has the requestheader-* entries."
  rule: "NoNamespace"
  fileNames:
    - templates/rbac_rolebinding_auth-reader.yaml
  severity: "ERROR"
- reason: "Having an application test will mess with the shared testing environment since we are a platform service."
  rule: "AppTestExists"
  severity: "ERROR"
- reason: " If the helm chart supports earlier versions than ICP 3.2, it is acceptable to leave qualification.levelName: ibm-cloud-pak so that older versions of ICP display the IBM Cloud Pak badge"
  message: "qualification.levelName will not be valid for future versions of ICP: 'ibm-cloud-pak'"
  severity: "WARNING"
- reason: "According to this page (http://icp-content-playbook.rch.stglabs.ibm.com/designing-content/ilmt-licensing/), IBM Cloud Private is not on the list to include metering annotations"
  rule: "MeteringAnnotationsDefined"
  severity: "ERROR"
- reason: "This service is specifically for ibm cloud private"
  rule: "NoICPReferencesInHeadersAndChartDetails"
  severity: "ERROR"
- reason: "Not for internal services"
  rule: "CheckForGrafanaDashboard"
  severity: "WARNING"
- reason: "All ICP platform services were instructed not to include the keyword Limited"
  rule: "ChartNameVersionClassificationMatch"
  message: ".* expected chart with the Commercial keyword and no Limited keyword to have a name ending in \"-prod\""
  severity: "ERROR"
- reason: "All ICP platform services were instructed not to include the keyword Limited"
  rule: "ChartNameVersionClassificationMatch"
  message: ".* expected chart without name ending in \"-dev\" or \"-prod\" to have both the Commercial and Limited keywords"
  severity: "ERROR"
- reason: "This is meant to be run on icp, and is part of the icp platform services."
  rule: "NoICPReferences"
  severity: "REVIEW"
- reason: "This is not sensitive information, it's only what the pod can tolerate in an environment."
  rule: "NoSensitiveInfoInValues"
  message: "potentially secret parameter tolerations.* might not be allowed"
  severity: "REVIEW"
- reason: "This doesn't have any value attached to it."
  rule: "NoSensitiveInfoInValues"
  message: "potentially secret parameter global.imagePullSecrets might not be allowed"
  severity: "REVIEW"
- reason: "These parameters are in conditional statements so if they're not defined, they won't be used"
  rule: "UsedParametersAreDefined"
  severity: "REVIEW"
- reason: "The service account for the cert-manager namespace created by ICP is named default"
  rule: "NoDefaultServiceAccountName"
  severity: "REVIEW"
- reason: "Breaking chart upgrade is not acceptable, using old labels."
  rule: "CheckForOldMetadataLabels"
  severity: "REVIEW"
- reason: "The caBundle is injected during runtime by the cainjector microservice."
  rule: "ResourceSchemaIsValid"
  severity: "ERROR"
  fileNames:
    - templates/validating-webhook.yaml
    - templates/mutating-webhook.yaml
  message: ".*missing required field \"caBundle\" in io.k8s.api.admissionregistration.v1beta1.WebhookClientConfig.*"
- reason: "In 3.2.2 we still have to be able to upgrade from previous versions so changing to the new metadata labels will break that."
  rule: "RequiredMetadataLabelsDefined"
  severity: "ERROR"
- reason: "It hasn't been decided which entitled registry to use yet."
  rule: "UseEntitledRegistry"
  severity: "WARNING"
- reason: "We don't opt into the monitoring dashboard."
  rule: "MonitoringDashboardExists"
  severity: "WARNING"
- reason: "We haven't been certified yet"
  rule: "ProdGradeIsCertified"
  severity: "WARNING"
- reason: "This service is not stateful and can come back up or be removed at any time without any disruption to the environment."
  rule: "PodDisruptionBudgetInReadme"
  severity: "WARNING"
- reason: "The regex won't pick it up"
  rule: "CustomPodSecurityInReadme"
  severity: "ERROR"
- reason: "The link to translated licenses does not exists yet, will add the link to the license file when it is available."
  rule: "TranslatedLicenseLinkExists"
  severity: "ERROR"
- reason: "No reason to use SCH"
  rule: "ChartUsesSCH"
  severity: "INFO"
- reason: "No icon approved for use."
  rule: "StandardHelmLint"
  message: "icon is recommended"
  severity: "INFO"
